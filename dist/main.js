(()=>{function t(t){const e=document.getElementById("projects-container");e.innerHTML="",t.forEach((t=>{const n=document.createElement("div");n.classList.add("clickable","tab","project-tab"),n.setAttribute("data-category",t.id),n.textContent=t.name;const o=document.createElement("button");o.innerHTML="&times;",o.classList.add("delete-project-btn"),o.setAttribute("data-project-id",t.id),n.appendChild(o),e.appendChild(n)}))}function e(t){const e=t.target.closest(".tab");if(e){const t=e.getAttribute("data-category");a(t),o(t),c(null)}}function n(t){const e=t.target.closest(".project-tab");if(e){const t=e.getAttribute("data-category");a(t),o(null),c(t)}}function o(t){document.querySelectorAll(".tab").forEach((t=>{t.classList.remove("underline")}));const e=document.querySelector(`.tab[data-category="${t}"]`);e&&e.classList.add("underline")}function c(t){document.querySelectorAll(".project-tab").forEach((e=>{e.classList.remove("underline"),e.getAttribute("data-category")===t&&e.classList.add("underline")}))}function a(t){const e=document.getElementById("todoTask-container");e.innerHTML="",(JSON.parse(localStorage.getItem("todos"))||[]).forEach((n=>{if("General"===t||"Today"===t&&n.date===s()||n.projectId&&t===n.projectId){const t=document.createElement("div");if(t.classList.add("todoTask"),t.textContent=n.name,n.date){const e=function(t){const e=s(),n=new Date(t)-new Date(e);return Math.ceil(n/864e5)}(n.date),o=document.createElement("span");o.textContent=`${e} days`,o.classList.add("daysLeft"),t.appendChild(o)}n.important&&t.classList.add("importantTodo");const r=document.createElement("button");r.textContent="Delete",r.addEventListener("click",(()=>function(t){const e=d(),n=function(){const t=document.querySelector(".tab.underline");return t?t.getAttribute("data-category"):"General"}(),r=(JSON.parse(localStorage.getItem("todos"))||[]).filter((e=>e.id!==t.id));localStorage.setItem("todos",JSON.stringify(r)),a(e),o(n),c(e)}(n))),t.appendChild(r),e.appendChild(t)}}))}function d(){const t=document.querySelector(".project-tab.underline");return t?t.getAttribute("data-category"):"General"}function r(t){const e=document.getElementById(t);e&&e.reset()}function s(){const t=new Date;return`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}function i(){document.getElementById("create-project").classList.remove("displayNone")}function l(){document.getElementById("create-project").classList.add("displayNone"),r("create-project-form")}function m(e){e.preventDefault();const n=document.getElementById("project-name").value;if(n){const e=Date.now().toString(),c={id:e,name:n},a=JSON.parse(localStorage.getItem("projects"))||[];a.push(c),localStorage.setItem("projects",JSON.stringify(a)),t(a),o(e),l()}}function u(t){t.preventDefault();const e=document.getElementById("todo-name").value,n=document.getElementById("todo-important").checked,o=document.getElementById("todo-date").value,c=d();if(e&&o){const t={id:Date.now(),name:e,important:n,date:o,projectId:c},d=JSON.parse(localStorage.getItem("todos"))||[];d.push(t),localStorage.setItem("todos",JSON.stringify(d)),a(c),p()}}function g(){document.getElementById("create-todo").classList.remove("displayNone")}function p(){document.getElementById("create-todo").classList.add("displayNone"),r("create-todo-form")}document.addEventListener("DOMContentLoaded",(()=>{!function(){t(JSON.parse(localStorage.getItem("projects"))||[]),document.getElementById("createProjectBtn").addEventListener("click",i),document.getElementById("createTodoBtn").addEventListener("click",g),document.getElementById("closeTodo").addEventListener("click",p),document.getElementById("create-todo-form").addEventListener("submit",u),document.getElementById("closeProject").addEventListener("click",l),document.getElementById("create-project-form").addEventListener("submit",m),document.getElementById("home-container").addEventListener("click",e);const c=document.getElementById("projects-container");c.addEventListener("click",n),a("General"),c.addEventListener("click",(e=>{const n=e.target.closest(".delete-project-btn");n&&function(e){const n=(JSON.parse(localStorage.getItem("projects"))||[]).filter((t=>t.id!==e));localStorage.setItem("projects",JSON.stringify(n)),function(t){const e=(JSON.parse(localStorage.getItem("todos"))||[]).filter((e=>e.projectId!==t));localStorage.setItem("todos",JSON.stringify(e)),a(d())}(e),t(n),d()===e&&o("General")}(n.getAttribute("data-project-id"))}))}()}))})();